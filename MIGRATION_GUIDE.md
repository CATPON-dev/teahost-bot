# üîÑ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —é–∑–µ—Ä–±–æ—Ç–æ–≤

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å —é–∑–µ—Ä–±–æ—Ç—ã —Å –æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –¥—Ä—É–≥–æ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–æ–ª–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –í—Å–µ —Ñ–∞–π–ª—ã, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**: –í—Å–µ loop-–æ–±—Ä–∞–∑—ã, –∏–∑–æ–ª—è—Ü–∏—è –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**: Systemd —Å–µ—Ä–≤–∏—Å—ã, Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ü—Ä–æ–≥—Ä–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ß–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —é–∑–µ—Ä–±–æ—Ç–æ–º
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üîÑ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–æ–π —Å–µ—Ä–≤–µ—Ä"**
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### 2. –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ

```python
import system_manager as sm

# –ú–∏–≥—Ä–∞—Ü–∏—è —é–∑–µ—Ä–±–æ—Ç–∞
result = await sm.migrate_userbot_to_server(
    ub_username="ub123",
    source_server="192.168.1.100",
    target_server="192.168.1.200",
    bot=bot,
    chat_id=chat_id
)

if result["success"]:
    print("‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!")
else:
    print(f"‚ùå –û—à–∏–±–∫–∞: {result['message']}")
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü—Ä–æ—Ü–µ—Å—Å –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
   - –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ

2. **–°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞**
   - –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
   - –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–∂–∞—Ç–∏–µ –≤ tar.gz

3. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–µ–ª–µ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞**
   - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ–∑–¥–∞–Ω–∏–µ loop-–æ–±—Ä–∞–∑–∞ (812MB)
   - –ú–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∫–∞–∫ –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

4. **–ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö**
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ —á–µ—Ä–µ–∑ SFTP
   - –†–∞—Å–ø–∞–∫–æ–≤–∫–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ Ubuntu
   - –°–æ–∑–¥–∞–Ω–∏–µ Python venv (Ubuntu 24.04) –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Ubuntu 22.04)
   - –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

6. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ**
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ë–î
   - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   - –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –°–∏—Å—Ç–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- **–ò–∑–æ–ª—è—Ü–∏—è**: –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π loop-–æ–±—Ä–∞–∑
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤**: MemoryHigh=500M, CPUQuota=60%
- **–ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞**: chmod 750 –¥–ª—è –¥–æ–º–∞—à–Ω–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
- **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π /tmp**: –û—Ç–¥–µ–ª—å–Ω—ã–π loop-–æ–±—Ä–∞–∑ –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–µ–¥ –º–∏–≥—Ä–∞—Ü–∏–µ–π

- –°—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –∏—Å—Ö–æ–¥–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
- –°–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ (–º–∏–Ω–∏–º—É–º 2GB)
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 'true')
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
available_servers = await sm.get_available_servers_for_migration(
    ub_username="ub123",
    current_server="192.168.1.100"
)

for server in available_servers:
    print(f"–°–µ—Ä–≤–µ—Ä: {server['ip']}")
    print(f"–°—Ç—Ä–∞–Ω–∞: {server['country']}")
    print(f"–ì–æ—Ä–æ–¥: {server['city']}")
```

### –õ–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤:
- Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
- –ñ—É—Ä–Ω–∞–ª systemd

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–±—ã—á–Ω–æ 2-5 –º–∏–Ω—É—Ç)
2. **–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫**: –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –≥–æ–ª–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä
3. **–ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å–∞**: –Æ–∑–µ—Ä–±–æ—Ç –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –≤—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏
4. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç SSH**: –¢—Ä–µ–±—É–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## üõ†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–µ—Å—Ç–∞"

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
df -h /home
```

### –û—à–∏–±–∫–∞ "SSH —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ"

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
ssh root@SERVER_IP
```

### –û—à–∏–±–∫–∞ "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
cat /etc/passwd | grep ub
```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ
async def auto_migrate_on_high_load(ub_username: str, current_server: str):
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
    stats = await sm.get_server_stats(current_server)
    cpu_usage = float(stats.get('cpu_usage', '0'))
    
    if cpu_usage > 80:  # –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
        available_servers = await sm.get_available_servers_for_migration(
            ub_username, current_server
        )
        
        if available_servers:
            target_server = available_servers[0]['ip']
            await sm.migrate_userbot_to_server(
                ub_username, current_server, target_server
            )
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏

- **–í—Ä–µ–º—è –º–∏–≥—Ä–∞—Ü–∏–∏**: –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è 3-5 –º–∏–Ω—É—Ç
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 95%+ —É—Å–ø–µ—à–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- **–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö**: –û–±—ã—á–Ω–æ 50-200MB –Ω–∞ —é–∑–µ—Ä–±–æ—Ç–∞
- **–°–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫**: ~100-500MB –Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—é

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ SSH
- –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞—é—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

---

**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2024  
**–ê–≤—Ç–æ—Ä**: SharkHost Team 